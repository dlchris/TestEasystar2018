webpackJsonp([0,2],{"+uHU":function(e,t){},"1Eaw":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("EM60"),n=a("xEPo"),s={name:"FilesView",props:["docId"],created:function(){this.$nextTick(function(){this.getFiles()})},data:function(){return{loading:!0,count:0,emptyFile:{DESCRIOTIO:"无数据"},files:[]}},methods:{calcFileSize:function(e){var t=Math.pow(1024,2);if(e>=0&&e<=t)return(e/1024).toFixed(2)+" KB";var a=Math.pow(1024,3);if(e>=t&&e<=a)return(e/t).toFixed(2)+" MB";var i=Math.pow(1024,4);return e>=a&&e<=i?(e/a).toFixed(2)+" GB":(e/i).toFixed(2)+" TB"},getFiles:function(){var e=this;-1!==this.$parent.$el.parentElement.classList[0].indexOf("el-table__body-wrapper")&&this.axios.get(this.api+"/GetFiles.do",{params:{docId:this.docId}}).then(function(t){e.loading=!1,0===t.data.code?e.files=t.data.list:e.files=[]}).catch(function(){e.loading=!1,e.files=[]})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"95%"}},[a("el-row",{ref:"row",staticStyle:{height:"88px"}},[e.files.length>0?a("el-scrollbar",{staticStyle:{height:"100%"},attrs:{native:!1}},e._l(e.files,function(t){return a("el-col",{key:t.FILEID,staticStyle:{margin:"0px",height:"auto"},attrs:{span:3}},[a("el-tooltip",{attrs:{content:e.calcFileSize(t.FILESIZE),placement:"bottom"}},[a("div",{staticStyle:{border:"0px","text-align":"center",height:"100%"},attrs:{title:t.DESCRIOTIO}},[a("img",{staticStyle:{width:"48px",height:"48px","box-shadow":"5px 2px 6px #000"},attrs:{src:"../../static/assets/files/"+t.FILETYPE.toLowerCase()+"_48px.png"}}),e._v(" "),a("div",{staticStyle:{padding:"0px"}},[e._v("\n            "+e._s(t.DESCRIOTIO)+"\n          ")])])])],1)})):a("el-col",{attrs:{span:24}},[a("h1",[e._v("无数据")])])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,o,!1,function(e){a("X/si")},null,null).exports,c={name:"DocMain",components:{EasyStarMenu:n.a,FilesView:r,ArchiveHome:i.default},data:function(){return{title:"档案管理",classId:"",classType:"",data:[],loading:!1,page:{pageSizes:[20,40,80,100],pageSize:10,currentPage:1,total:0},option:{expand:!0,highlightCurrentRow:!0,height:"510px",addBtn:!0,border:!0,stripe:!0,showHeader:!0,index:!1,size:"mini",selection:!1,page:!0,align:"center",menu:!0,menuAlign:"center",menuType:"menu",menuWidth:"120px",column:[]}}},mounted:function(){this.$nextTick(function(){this.page.pageSize=this.page.pageSizes[0],this.fetchData()})},watch:{$route:"fetchData"},methods:{myChange:function(){console.log(this)},currentChange:function(e){this.page.currentPage=e,this.fetchData()},refreshChange:function(e){this.fetchData()},rowUpdate:function(e,t,a,i){console.log("3=",e,t,a,i)},sizeChange:function(e){this.page.pageSize=e,this.fetchData()},parseCols:function(e){var t=[];e.forEach(function(e){var a={};a.label=e.label,a.prop=e.prop,a.overHidden=!0,t.push(a)}),this.option.column=t},fetchData:function(){console.log(this.page.pageSize,this.page.currentPage);var e=this;if(this.classId=this.$route.params.classId,this.classType=this.$route.params.classType,this.option.expand=!1,void 0!==this.classId&&void 0!==this.classType&&""!==this.classId&&""!==this.classType){var t="";switch(this.classType){case"0":t="/DocTable.do",this.option.expand=!0;break;case"1":t="/BoxTable.do";break;case"2":t="/RoolTable.do"}this.loading=!0,this.axios.get(this.api+t,{params:{classId:this.classId,pageSize:this.page.pageSize,pageIndex:this.page.currentPage}}).then(function(t){console.log(t),e.loading=!1,e.parseCols(t.data.cols),e.data=t.data.list,e.page.total=t.data.count}).catch(function(){e.loading=!1})}}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"}},[a("avue-crud",{attrs:{data:e.data,option:e.option,page:e.page,"table-loading":e.loading},on:{"size-change":e.sizeChange,"row-update":e.rowUpdate,"refresh-change":e.refreshChange,"current-change":e.currentChange},scopedSlots:e._u([{key:"expand",fn:function(t){return[a("files-view",{attrs:{"doc-id":t.row.DOCID},on:{change:e.myChange}})]}}])})],1)},staticRenderFns:[]};var h=a("VU/8")(c,l,!1,function(e){a("+uHU")},null,null);t.default=h.exports},EM60:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("首页")])])}]};var n=a("VU/8")({name:"ArchiveHome",data:function(){return{}}},i,!1,function(e){a("HPZP")},"data-v-0ed9f2a4",null);t.default=n.exports},HPZP:function(e,t){},"X/si":function(e,t){}});
//# sourceMappingURL=0.2aab450058fbf2bf7e29.js.map